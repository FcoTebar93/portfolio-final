---
import { t, getLanguage } from '../utils/i18n.ts';
import imagenPerfil from '../img/imagen_perfil.jpeg';

const lang = getLanguage();
const roles = lang === 'es' 
  ? ["Desarrollador Fullstack", "CI/CD & DevOps", "Kubernetes & Docker", "Cloud & GCP", "Despliegue de LLM", "Automatización e Integraciones"]
  : ["Fullstack Developer", "CI/CD & DevOps", "Kubernetes & Docker", "Cloud & GCP", "LLM Deployment", "Automation & Integrations"];
---

<section class="min-h-screen flex items-center justify-center px-4 pb-8 sm:pb-12 relative overflow-hidden">
  <div class="max-w-5xl w-full flex flex-col md:flex-row md:items-center md:justify-between gap-10 md:gap-12 relative z-10">
    <!-- Imagen de perfil: aparece primero -->
    <div class="order-first md:order-last flex justify-center md:justify-end shrink-0 hero-photo-wrap">
      <img
        src={imagenPerfil.src}
        alt="Francisco Tébar"
        width={imagenPerfil.width}
        height={imagenPerfil.height}
        class="hero-photo w-40 h-40 sm:w-52 sm:h-52 md:w-64 md:h-64 rounded-full object-cover border-4 border-accent/30 shadow-xl"
        fetchpriority="high"
      />
    </div>
    <div class="flex flex-col gap-10 min-w-0">
    <div class="space-y-4">
      <p class="hero-anim hero-from-left text-xs sm:text-sm uppercase tracking-[0.2em] text-muted font-mono mb-2" data-i18n="hero.portfolio" style="animation-delay: 0.35s">
        {t('hero.portfolio')}
      </p>

      <h1 class="hero-anim hero-from-left text-5xl sm:text-6xl md:text-7xl font-bold leading-[1.1] tracking-tight" style="animation-delay: 0.5s">
        <span class="block text-text">Francisco Tébar Navarro</span>
        <span class="block hero-anim hero-from-right text-accent font-mono text-xl sm:text-2xl md:text-3xl mt-3 sm:mt-4" style="animation-delay: 0.65s">
          <span data-i18n="hero.subtitle">{t('hero.subtitle')} </span>
          <span
            id="typewriter"
            class="border-r-2 border-accent pr-1"
            data-roles={JSON.stringify(roles)}
          >
            {roles[0]}
          </span>
        </span>
      </h1>

      <p class="hero-anim hero-from-left text-base sm:text-lg text-muted max-w-xl leading-relaxed" data-i18n="hero.description" style="animation-delay: 0.8s">
        {t('hero.description')}
      </p>
    </div>

    <div class="hero-anim hero-from-bottom flex flex-col sm:flex-row gap-4 sm:items-center" style="animation-delay: 1s">
      <a
        href="#projects"
        class="inline-flex items-center justify-center px-8 py-3.5 rounded-full bg-accent text-white font-semibold text-sm sm:text-base hover:opacity-90 transition-all hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] shadow-lg"
        data-i18n="hero.viewWork"
      >
        {t('hero.viewWork')}
      </a>

      <div class="flex items-center gap-4 text-sm text-muted">
        <a
          href="https://github.com/FcoTebar93"
          target="_blank"
          rel="noreferrer"
          class="hover:text-accent transition-colors font-medium"
        >
          GitHub
        </a>
        <span class="w-[1px] h-4 bg-muted/30" />
        <a
          href="https://www.linkedin.com/in/francisco-jos%C3%A9-t%C3%A9bar-navarro-5a858a23a/"
          target="_blank"
          rel="noreferrer"
          class="hover:text-accent transition-colors font-medium"
        >
          LinkedIn
        </a>
        <span class="w-[1px] h-4 bg-muted/30" />
        <a
          href="mailto:fcotebar93@gmail.com"
          class="hover:text-accent transition-colors font-medium"
          data-i18n="hero.contact"
        >
          {t('hero.contact')}
        </a>
      </div>
    </div>
    </div>
  </div>

  <div class="pointer-events-none fixed inset-0 -z-10 hero-gradient"></div>

  <script is:inline>
    const el = document.getElementById("typewriter");
    if (el) {
      const roles = JSON.parse(el.dataset.roles || "[]");
      let index = 0;
      let charIndex = 0;
      let deleting = false;

      const type = () => {
        const current = roles[index] || "";

        if (!deleting) {
          el.textContent = current.slice(0, charIndex + 1);
          charIndex++;
          if (charIndex === current.length) {
            deleting = true;
            setTimeout(type, 1200);
            return;
          }
        } else {
          el.textContent = current.slice(0, charIndex - 1);
          charIndex--;
          if (charIndex === 0) {
            deleting = false;
            index = (index + 1) % roles.length;
          }
        }

        const speed = deleting ? 40 : 90;
        setTimeout(type, speed);
      };

      type();
    }
  </script>

  <style>
    .hero-photo-wrap {
      animation: hero-photo-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }
    @keyframes hero-photo-in {
      from {
        opacity: 0;
        transform: translate(1.5rem, 0) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translate(0, 0) scale(1);
      }
    }
    @media (max-width: 767px) {
      @keyframes hero-photo-in {
        from {
          opacity: 0;
          transform: translate(0, -1rem) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translate(0, 0) scale(1);
        }
      }
    }

    .hero-anim {
      opacity: 0;
      animation-duration: 0.55s;
      animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      animation-fill-mode: forwards;
    }
    .hero-from-left {
      animation-name: hero-from-left;
    }
    .hero-from-right {
      animation-name: hero-from-right;
    }
    .hero-from-bottom {
      animation-name: hero-from-bottom;
    }
    @keyframes hero-from-left {
      from {
        opacity: 0;
        transform: translate(-1.25rem, 0);
      }
      to {
        opacity: 1;
        transform: translate(0, 0);
      }
    }
    @keyframes hero-from-right {
      from {
        opacity: 0;
        transform: translate(1.25rem, 0);
      }
      to {
        opacity: 1;
        transform: translate(0, 0);
      }
    }
    @keyframes hero-from-bottom {
      from {
        opacity: 0;
        transform: translate(0, 1rem);
      }
      to {
        opacity: 1;
        transform: translate(0, 0);
      }
    }
    .hero-gradient {
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.18) 0%, transparent 60%),
                  radial-gradient(circle at bottom, rgba(15, 23, 42, 0.9) 0%, rgba(15, 23, 42, 1) 100%);
    }

    [data-theme="light"] section {
      background: var(--color-primary);
    }

    [data-theme="light"] .hero-gradient {
      background: transparent;
    }

    [data-theme="light"] .text-muted {
      color: #525252;
    }

    [data-theme="light"] .text-text {
      color: #1A1A1A;
    }

    [data-theme="light"] h1 .text-text {
      color: #0A0A0A;
    }

    [data-theme="light"] .bg-accent {
      background-color: var(--color-accent);
    }

    [data-theme="light"] a.hover\:text-accent:hover {
      color: var(--color-accent);
    }
    [data-theme="light"] .hero-photo {
      border-color: rgba(2, 132, 199, 0.35);
      box-shadow: var(--shadow-xl);
    }
  </style>
</section>